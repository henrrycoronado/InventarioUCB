<div class="contenedor">
  <!-- Equipment list -->
  <div class="lista-equipos">
    <h2>Lista de Equipos</h2>
    <div class="contenedor-scroll">
      <table>
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Código UCB</th>
            <th>Ubicación</th>
            <th>Estado</th>
            <th>Detalles</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let equipo of equipos">
            <td>{{ equipo.Nombre }}</td>
            <td>{{ equipo.CodigoUcb }}</td>
            <td>{{ equipo.Ubicacion }}</td>
            <td>{{ equipo.Estado }}</td>
            <td>
              <button (click)="seleccionarEquipo(equipo)">+</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <button (click)="mostrarFormularioNuevoEquipo()">Nuevo Equipo</button>
  </div>

  <!-- Equipment details -->
  <div class="detalle-equipo" *ngIf="equipoSeleccionado && !mostrarFormulario">
    <h2>Detalles del Equipo</h2>
    <button class="eliminar" (click)="eliminarEquipo()">ELIMINAR</button>
    <button (click)="habilitarEdicion()" *ngIf="!modoEdicion">ACTUALIZAR</button>
    <form *ngIf="modoEdicion" (ngSubmit)="guardarCambios()">
      <div *ngFor="let campo of camposEquipo">
        <label>{{ campo.label }}</label>
        <input [(ngModel)]="equipoSeleccionado[campo.key]" [name]="campo.key" required />
      </div>
      <button type="submit">GUARDAR</button>
    </form>
    <div *ngIf="!modoEdicion">
      <p><strong>Nombre:</strong> {{ equipoSeleccionado.Nombre }}</p>
      <p><strong>Código UCB:</strong> {{ equipoSeleccionado.CodigoUcb }}</p>
      <p><strong>Código de Equipo:</strong> {{ equipoSeleccionado.CodigoEquipo }}</p>
      <p><strong>Número de Serie:</strong> {{ equipoSeleccionado.NumeroSerie }}</p>
      <p><strong>Fabricante:</strong> {{ equipoSeleccionado.Fabricante }}</p>
      <p><strong>Dirección de Enlace:</strong> 
        <a [href]="equipoSeleccionado.DireccionEnlace" target="_blank">
          {{ equipoSeleccionado.DireccionEnlace }}
        </a>
      </p>
      <p><strong>Descripción:</strong> {{ equipoSeleccionado.Descripcion }}</p>
      <p><strong>Categoría:</strong> {{ equipoSeleccionado.IdCategoria }}</p>
      <p><strong>Ubicación:</strong> {{ equipoSeleccionado.Ubicacion }}</p>
      <p><strong>Estado del Equipo:</strong> {{ equipoSeleccionado.EstadoEquipo }}</p>
      <p><strong>Estado:</strong> {{ equipoSeleccionado.Estado }}</p>
    </div>
  </div>

  <!-- New equipment registration form -->
  <div class="formulario" *ngIf="mostrarFormulario && !equipoSeleccionado"> 
    <h2>Registrar Nuevo Equipo</h2>
    <form (ngSubmit)="registrarEquipo()">
      <div>
        <label for="codigoUcb">Código UCB:</label>
        <input id="codigoUcb" [(ngModel)]="equipoData.CodigoUcb" name="codigoUcb" required />
      </div>
      <div>
        <label for="codigoEquipo">Código de Equipo:</label>
        <input id="codigoEquipo" [(ngModel)]="equipoData.CodigoEquipo" name="codigoEquipo" required />
      </div>
      <div>
        <label for="numeroSerie">Número de Serie:</label>
        <input id="numeroSerie" [(ngModel)]="equipoData.NumeroSerie" name="numeroSerie" />
      </div>
      <div>
        <label for="fabricante">Fabricante:</label>
        <input id="fabricante" [(ngModel)]="equipoData.Fabricante" name="fabricante" required/>
      </div>
      <div>
        <label for="direccionEnlace">Dirección de Enlace:</label>
        <input id="direccionEnlace" [(ngModel)]="equipoData.DireccionEnlace" name="direccionEnlace" required/>
      </div>
      <div>
        <label for="nombre">Nombre del Equipo:</label>
        <input id="nombre" [(ngModel)]="equipoData.Nombre" name="nombre" required />
      </div>
      <div>
        <label for="descripcion">Descripción:</label>
        <textarea id="descripcion" [(ngModel)]="equipoData.Descripcion" name="descripcion"></textarea>
      </div>
      <div>
        <label for="idCategoria">Categoría:</label>
        <input id="idCategoria" [(ngModel)]="equipoData.IdCategoria" name="idCategoria" type="number" required />
      </div>
      <div>
        <label for="ubicacion">Ubicación:</label>
        <input id="ubicacion" [(ngModel)]="equipoData.Ubicacion" name="ubicacion" required />
      </div>
      <div>
        <label for="estadoEquipo">Estado del Equipo:</label>
        <input id="estadoEquipo" [(ngModel)]="equipoData.EstadoEquipo" name="estadoEquipo" />
      </div>
      <div>
        <label for="estado">Estado:</label>
        <input id="estado" [(ngModel)]="equipoData.Estado" name="estado" />
      </div>
      <button type="submit">Registrar Equipo</button>
    </form>
  </div>
</div>
